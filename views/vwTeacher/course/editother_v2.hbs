{{#section 'css'}}
<style>
.star-rating.disabled{
  margin-top: 4px;
}
</style>
{{/section}}

{{#section 'js'}}

{{/section}}

<main>
  <div class="page-section bg-light" style="padding-top:0px!important">
    <div class="container">

      <div class="row justify-content-center">
        <div class="col-lg-8 py-3">
          <div class="blog-single-wrap">
            <div class="post-thumbnail">
              <img src="/img/course/{{course_detail.image}}" alt="{{course_detail.name}}" style="width:100%;height:100%;">
            </div>
            <h1 class="post-title">{{course_detail.name}}</h1>
            <p>{{course_detail.short_description}}</p>
            <div class="post-meta">
              <div class="post-author">
                <p href="#">
                  {{#each this.teacher}}
                  {{this.fullname}}
                  {{/each}}
                </p>
              </div>
              <span class="gap">|</span>
              <div class="post-date">
                <p>{{course_detail.modification_date}}</p>
              </div>
              <span class="gap">|</span>
              <div>
                <p>{{num_of_member.member}} Học viên </p>
              </div>
              {{#if rating.rating}}
              <span class="gap">| <span style="color: red; font-size: 14px;">{{rating.rating}}/5</span> </span>
              <input type="hidden" id="myrating" value="{{rating.rating}}">
              <div class="post-comment-count">
                <p id="myscorerating"> 
                    <script>
                      var myRating = raterJs({
                        element: document.querySelector("#myscorerating"),
                        starSize: 15,
                        readOnly: true,
                        rateCallback: function rateCallback(rating, done) {
                          this.setRating(rating);
                          done();
                        }
                      });
                      console.log($('#myrating').val());
                      myRating.setRating(parseFloat($('#myrating').val()));
                    </script>
                </p>
              </div>
              <span style="color: #a4a7b7; font-size: 14px;">({{rating.num_of_rating}} đánh giá)</span>
              {{/if}}
            </div>
            <div class="post-content">
              {{{course_detail.description}}}
            </div>
          </div> <!-- .blog-single-wrap -->

          <div class="comment-form-wrap pt-5">
            <h3>Đề cương khóa học</h3>
            <div class="accordion" id="accordionExample">
              {{#each course_detail.chapter_lesson}}
              <div class="card">
                <div class="card-header" id="heading{{this.id}}">
                  <h6 class="mb-0 d-flex justify-content-between">
                    <a href="/teacher/course/{{id_course}}/editchapter/{{id}}">
                    <button class="btn btn-link text-left" style="width: 100%; padding-left:0px;" type="button" data-toggle="collapse" data-target="#collapse{{this.id}}" aria-expanded="true" aria-controls="collapse{{this.id}}">
                      {{this.name}}
                    </button>
                    </a>
                    <div>
                    <form id="delChapter{{id}}" method="POST" action="/teacher/course/{{id_course}}/delchapter/{{id}}"></form>
                    <a href="/teacher/course/{{id_course}}/editchapter/{{id}}"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></a>
                    <a href="javascript: $('#delChapter{{id}}').submit();"><i class="fa fa-trash-o" aria-hidden="true"></i></a>            
                    </div>     
                  </h6>
                </div>

                <div id="collapse{{this.id}}" class="collapse show" aria-labelledby="heading{{this.id}}" data-parent="#accordionExample">

                  {{#each this.lesson}}
                  <div class="card-body border-bottom d-flex justify-content-between">
                    <a class="d-flex text-dark" href="/teacher/course/{{../id_course}}/chapter/{{../id}}/editlesson/{{id}}">{{this.name}}</a>
                    <div>
                    <form id="delLesson{{id}}" method="POST" action="/teacher/course/{{../id_course}}/dellesson/{{id}}"></form>
                    <a class="text-dark" href="/teacher/course/{{../id_course}}/chapter/{{../id}}/editlesson/{{id}}"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></a>
                    <a class="text-dark" href="javascript: $('#delLesson{{id}}').submit();"><i class="fa fa-trash-o" aria-hidden="true"></i></a>            
                    </div> 
                  </div>
                  {{/each}}
                </div>
              </div>
              {{/each}}
            </div>  
          </div> <!-- .comment-form-wrap -->


          <div class="comment-form-wrap pt-5">
            <h3>Giáo viên</h3>
            <div class="teacher-info">
              {{#each course_detail.teacher}}
              <div class="row py-3" style="border-bottom: 1px solid rgb(204, 203, 203); border-top: 2px solid rgb(204, 203, 203)">
                <div class="col-sm-4">
                  <img class="rounded-circle" style="width:150px; height:150px;" alt="100x100"
                    src="/img/user/{{this.id}}.jpg" data-holder-rendered="true">
                </div>
                <div class="col-sm-8">
                  <h5 class="my-2">{{this.fullname}}</h5>
                  <p>Thông tin: {{{this.info}}}</p>
                  <p>Số điện thoại: {{this.phone}}</p>
                  <p>Email: {{this.email}}</p>
                </div>
              </div>
              {{/each}}
              <div class="row" style="border-top:2px solid rgb(204, 203, 203);"></div>
            </div>
          </div> <!-- .comment-form-wrap -->
          <div class="comment-form-wrap pt-5">

          <div class="other">
            <h3>Bình luận</h3>
            {{#each feedback}}
            <div class="comment my-3 py-3" style="background-color:rgb(235 236 239); border-radius: 10px;">
              <div class="row">
                <div class="col-sm-1">
                  <img class="rounded-circle" style="width:50px; height:50px;" alt="100x100"
                    src="/img/user/{{id_user}}.jpg" data-holder-rendered="true">
                </div>
                <div class="col-sm-4">
                  <h5 style="margin:0">{{fullname}}</h5>
                  {{{rating_star}}}
                </div>
                <div class="col-sm-7 text-right text-muted pr-4">
                  {{modification_date}}
                </div>
              </div>
              <div class="row mt-2">
                <div class="col-sm-1"></div>
                <div class="col-sm-4">{{comment}}</div>

              </div>
            </div>
            {{/each}}
        </div> <!-- .comment-form-wrap -->
      </div>

      </div>

      <div class="col-lg-4 py-3">
        <div class="widget">
          <div class="widget-box">

            <h5 class="mb-3">{{course_detail.name}}</h5>

            <ul class="list-group list-group-flush">
              <li class="list-group-item d-flex justify-content-between align-items-center border-0 px-0 pb-0">
                Giá khóa học
                <span>{{course_detail.price}} đ</span>
              </li>
              <li class="list-group-item d-flex justify-content-between align-items-center px-0">
                Giảm giá
                <span>{{course_detail.offer}} %</span>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
  </div>
</main>